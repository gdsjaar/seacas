CMAKE_MINIMUM_REQUIRED(VERSION 3.8.0)

INCLUDE(CTest)

FILE(COPY test_data DESTINATION ${CMAKE_CURRENT_BINARY_DIR})

FUNCTION(addCatalystTest TEST_NAME MPI_RANKS_LIST TEST_EXECUTABLE
         EXTRA_TEST_ARGS)
    FOREACH(PROC ${MPI_RANKS_LIST})
        ADD_TEST(NAME ${TEST_NAME}_NP_${PROC}
             COMMAND ${MPIEXEC_EXECUTABLE}
             ${MPIEXEC_NUMPROC_FLAG} ${PROC}
             ${TEST_EXECUTABLE} ${EXTRA_TEST_ARGS})
    ENDFOREACH()
ENDFUNCTION()

ADD_SUBDIRECTORY(fixture)
ADD_SUBDIRECTORY(pipeline)
ADD_SUBDIRECTORY(parser)
ADD_SUBDIRECTORY(PhactoriTest)
